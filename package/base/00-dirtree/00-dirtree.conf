#!/bin/bash
# --- ROCK-COPYRIGHT-NOTE-BEGIN ---
# 
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# Please add additional copyright information _after_ the line containing
# the ROCK-COPYRIGHT-NOTE-END tag. Otherwise it might get removed by
# the ./scripts/Create-CopyPatch script. Do not edit this copyright text!
# 
# ROCK Linux: rock-src/package/base/00-dirtree/00-dirtree.conf
# ROCK Linux is Copyright (C) 1998 - 2006 Clifford Wolf
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version. A copy of the GNU General Public
# License can be found at Documentation/COPYING.
# 
# Many people helped and are helping developing ROCK Linux. Please
# have a look at http://www.rocklinux.org/ and the Documentation/TEAM
# file for details.
# 
# --- ROCK-COPYRIGHT-NOTE-END ---


main_dt() {
	echo -n "Change to root directory ... "
	mkdir -p $xroot/ ; cd $xroot/ ; echo 'done'

	mkdir -p "$xroot"/{,usr/,usr/local/}lib
	if [ "$ROCKCFG_MULTILIB" = 1 ] ; then
		if [ "$arch_target64" ] ; then
			mkdir -p "$xroot"/{,usr/,usr/local/}lib64
		fi
	fi

	while read a b c d e ; do
	    if [ "$a" = "chmod" -o "$a" = "chown" ] ; then
		echo "Running $a ($b) on $c ..."
		$a "$b" "$xroot/$c"
	    elif [ "$a" -a "$a" != "#" ] ; then
		if [ -e "$xroot/$b" ] ; then
			echo "Exists already: $b."
		elif [ "$a" = "m" ] ; then
			echo "Create directory $b ..."
			mkdir -p "$xroot/$b"
		elif [ "$a" = "l" -o "$a" = "l$(( arch_sizeof_char_p * 8 ))" ] ; then
			echo "Create symlink $b ($c) ..."
			ln -fsn "$c" "$xroot/$b"
		elif [ "$a" = "mknod" ] ; then
			echo "Create device node $b ..."
			$a "$xroot/$b" $c $d $e
			add_flist "$xroot/$b"
		elif [ "$a" = "mkfifo" ] ; then
			echo "Create pipe $b ..."
			$a "$xroot/$b"
		else
			echo "Syntax Error: $a $b $c" ; false
		fi
		add_flist "$xroot/$b"
	    fi
	done < $confdir/data.txt
}

srctar=none
autoextract=0
createprefix=0
createdocs=0
custmain="main_dt"
check_usrlocal=0

# don't split this package
postflist="pkgsplits="

var_remove flist''del "|" "var/adm/.*"
var_insert flist''del "|" "var/adm/logs/.*"
