--- ./lib/configure.orig	2007-07-01 10:00:43.000000000 +0200
+++ ./lib/configure	2007-07-01 10:03:08.000000000 +0200
@@ -20,7 +20,7 @@
 	proc=`/usr/sbin/lsdev -C -c processor -S available -F name | head -1`
 	cpu=`/usr/sbin/lsattr -F value -l $proc -a type | sed 's/_.*//'`
 else
-	cpu=`uname -m | sed 's/^i.86$/i386/;s/^sun4u$/sparc64/;s/^i86pc$/i386/'`
+	cpu=`echo $ROCK_ARCH | sed 's/^i.86$/i386/;s/^sun4u$/sparc64/;s/^i86pc$/i386/'`
 fi
 if [ "$sys" = "GNU/kFreeBSD" ]
 then
